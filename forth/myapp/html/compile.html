<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>compile</title>
<link rel="stylesheet" href="doc.css">
</head>
<body>
<h1>compile</h1>
<pre class="forth">
<font color=black>
<hr>

</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> Compiler words 

</font><font color=#00AAAA><a href = "root.html#1.1290" style="text-decoration: none; color: #00AAAA">there</a> 
</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> make-heads needs: 
</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> {noop execute compile, lit, or doLitop noCompile} 

</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> Compile to code RAM 

</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a>  </font><font color=#FF0000>!c     &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1010" style="text-decoration: none; color: #00AAAA">(</a> </font><font color=#008800>n addr --  )
  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1170" style="text-decoration: none; color: #00AAAA">[</a>  </font><font color=#AA0000>1  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">cells</a>  </font><font color=#00AAAA><a href = "root.html#1.1180" style="text-decoration: none; color: #00AAAA">]</a>  <a href = "root.html#1.1260" style="text-decoration: none; color: #00AAAA">literal</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">io!</a>              &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> set address 
  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1170" style="text-decoration: none; color: #00AAAA">[</a>  </font><font color=#AA0000>2  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">cells</a>  </font><font color=#00AAAA><a href = "root.html#1.1180" style="text-decoration: none; color: #00AAAA">]</a>  <a href = "root.html#1.1260" style="text-decoration: none; color: #00AAAA">literal</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">io!</a>              &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> write data 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 

</font><font color=#00AAAA><a href = "root.html#1.1130" style="text-decoration: none; color: #00AAAA">variable</a>  </font><font color=#AA00AA>lastinst  </font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> load with $100 to inhibit exit change 

</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a>  </font><font color=#FF0000>,c    &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1010" style="text-decoration: none; color: #00AAAA">(</a> </font><font color=#008800>inst --  )
  &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a>  </font><font color=#AA00AA><a href = "forth.html#(null)" style="text-decoration: none; color: #AA00AA">lastinst</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">!</a> 
  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1160" style="text-decoration: none; color: #00AAAA">[char]</a>  &nbsp;</font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">emit</a>  &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">.</a>  </font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> display instead of compiling... 
  &nbsp;</font><font color=#AA00AA><a href = "root.html#1.0074" style="text-decoration: none; color: #AA00AA">cp</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">@</a>  <a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">!c</a>  &nbsp;</font><font color=#AA0000>1  </font><font color=#AA00AA><a href = "root.html#1.0074" style="text-decoration: none; color: #AA00AA">cp</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">+!</a> 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 

</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> The LEX register is cleared whenever the instruction is not LITX. 
</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> LITX shifts 11-bit data into LEX from the right. 
</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> Full 16-bit and 32-bit data are supported with 2 or 3 inst. 

</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a>  </font><font color=#FF0000>extended_lit  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1010" style="text-decoration: none; color: #00AAAA">(</a> </font><font color=#008800>k11<<11 --  )
  &nbsp;</font><font color=#AA0000>11  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">rshift</a>  &nbsp;</font><font color=#AA0000>$7FF  </font><font color=#FF00FF><a href = "root.html#1.2070" style="text-decoration: none; color: #FF00FF">and</a>  </font><font color=#AA0000>$E000  </font><font color=#FF00FF><a href = "root.html#1.2080" style="text-decoration: none; color: #FF00FF">+</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">,c</a> 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 

</font><font color=#AA00AA><a href = "root.html#1.0050" style="text-decoration: none; color: #AA00AA">cellbits</a>  </font><font color=#AA0000>22  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">></a>  </font><font color=#00AAAA><a href = "root.html#1.0260" style="text-decoration: none; color: #00AAAA">[if]</a> 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a>  </font><font color=#FF0000>lit,  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1010" style="text-decoration: none; color: #00AAAA">(</a> </font><font color=#008800>u --  )
  &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a>  </font><font color=#AA0000>$FFC00000  </font><font color=#FF00FF><a href = "root.html#1.2070" style="text-decoration: none; color: #FF00FF">and</a>  </font><font color=#00AAAA><a href = "root.html#1.2930" style="text-decoration: none; color: #00AAAA">if</a> 
     &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a>  </font><font color=#AA0000>11  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">rshift</a>  <a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">extended_lit</a> 
     &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">extended_lit</a> 
  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.2940" style="text-decoration: none; color: #00AAAA">else</a> 
     &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a>  </font><font color=#AA0000>$3FF800  </font><font color=#FF00FF><a href = "root.html#1.2070" style="text-decoration: none; color: #FF00FF">and</a>  </font><font color=#00AAAA><a href = "root.html#1.2930" style="text-decoration: none; color: #00AAAA">if</a> 
        &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">extended_lit</a> 
     &nbsp;</font><font color=#00AAAA><a href = "root.html#1.2950" style="text-decoration: none; color: #00AAAA">then</a> 
  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.2950" style="text-decoration: none; color: #00AAAA">then</a>  &nbsp;</font><font color=#AA0000>$7FF  </font><font color=#FF00FF><a href = "root.html#1.2070" style="text-decoration: none; color: #FF00FF">and</a> 
  &nbsp;</font><font color=#AA0000>$100  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">/mod</a>  </font><font color=#AA0000>9  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">lshift</a>  </font><font color=#FF00FF><a href = "root.html#1.2080" style="text-decoration: none; color: #FF00FF">+</a> 
  &nbsp;</font><font color=#AA0000>$F000  </font><font color=#FF00FF><a href = "root.html#1.2080" style="text-decoration: none; color: #FF00FF">+</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">,c</a> 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 
</font><font color=#00AAAA><a href = "root.html#1.0280" style="text-decoration: none; color: #00AAAA">[else]</a> 
:  lit,  &nbsp;(  u  --  ) 
  &nbsp;dup  $3FF800  and  if 
     &nbsp;dup  extended_lit 
  &nbsp;then  &nbsp;$7FF  and 
  &nbsp;$100  /mod  9  lshift  + 
  &nbsp;$F000  +  ,c 
; 
[then] 

</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a>  </font><font color=#FF0000>compile,  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1010" style="text-decoration: none; color: #00AAAA">(</a> </font><font color=#008800>xt --  )
  &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a>  </font><font color=#AA0000>$FFE000  </font><font color=#FF00FF><a href = "root.html#1.2070" style="text-decoration: none; color: #FF00FF">and</a>  </font><font color=#00AAAA><a href = "root.html#1.2930" style="text-decoration: none; color: #00AAAA">if</a> 
     &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a>  </font><font color=#AA0000>13  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">rshift</a>  &nbsp;</font><font color=#AA0000>$E000  </font><font color=#FF00FF><a href = "root.html#1.2080" style="text-decoration: none; color: #FF00FF">+</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">,c</a>         &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> litx 
  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.2950" style="text-decoration: none; color: #00AAAA">then</a>  &nbsp;</font><font color=#AA0000>$1FFF  </font><font color=#FF00FF><a href = "root.html#1.2070" style="text-decoration: none; color: #FF00FF">and</a>   &nbsp;</font><font color=#AA0000>$C000  </font><font color=#FF00FF><a href = "root.html#1.2080" style="text-decoration: none; color: #FF00FF">+</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">,c</a>         &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> call 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a>  </font><font color=#FF0000>relast  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1010" style="text-decoration: none; color: #00AAAA">(</a> </font><font color=#008800>inst --  )
  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1160" style="text-decoration: none; color: #00AAAA">[char]</a>  &nbsp;</font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">emit</a> 
  &nbsp;</font><font color=#AA0000>0  </font><font color=#FF00FF><a href = "root.html#1.2010" style="text-decoration: none; color: #FF00FF">invert</a>  </font><font color=#AA00AA><a href = "root.html#1.0074" style="text-decoration: none; color: #AA00AA">cp</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">+!</a>  <a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">,c</a>                    &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> recompile the last instruction 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a>  </font><font color=#FF0000>exit,  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1010" style="text-decoration: none; color: #00AAAA">(</a> </font><font color=#008800>--  )
  &nbsp;</font><font color=#AA00AA><a href = "forth.html#(null)" style="text-decoration: none; color: #AA00AA">lastinst</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">@</a>  </font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a>  </font><font color=#AA0000>$810C  </font><font color=#FF00FF><a href = "root.html#1.2070" style="text-decoration: none; color: #FF00FF">and</a>  <a href = "root.html#1.2150" style="text-decoration: none; color: #FF00FF">0=</a>  </font><font color=#00AAAA><a href = "root.html#1.2930" style="text-decoration: none; color: #00AAAA">if</a>       &nbsp;<a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> last ALU can accept return? 
     &nbsp;</font><font color=#AA0000>$10C  </font><font color=#FF00FF><a href = "root.html#1.2080" style="text-decoration: none; color: #FF00FF">+</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">relast</a>  </font><font color=#00AAAA><a href = "root.html#1.1230" style="text-decoration: none; color: #00AAAA">exit</a>  &nbsp;<a href = "root.html#1.2950" style="text-decoration: none; color: #00AAAA">then</a>          &nbsp;<a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> change to include a return 
  &nbsp;</font><font color=#AA0000>$F000  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">2dup</a>  </font><font color=#FF00FF><a href = "root.html#1.2070" style="text-decoration: none; color: #FF00FF">and</a>  &nbsp;</font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">=</a>                    &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> last literal? 
  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.2930" style="text-decoration: none; color: #00AAAA">if</a>  &nbsp;</font><font color=#AA0000>$100  </font><font color=#FF00FF><a href = "root.html#1.2080" style="text-decoration: none; color: #FF00FF">+</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">relast</a>  </font><font color=#00AAAA><a href = "root.html#1.1230" style="text-decoration: none; color: #00AAAA">exit</a>  &nbsp;<a href = "root.html#1.2950" style="text-decoration: none; color: #00AAAA">then</a>         &nbsp;<a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> change to include a return 
  &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2130" style="text-decoration: none; color: #FF00FF">drop</a>  </font><font color=#AA0000>$10C  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">,c</a>                         &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800> plain return 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 

</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a>  </font><font color=#FF0000>doLitOp  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1010" style="text-decoration: none; color: #00AAAA">(</a> </font><font color=#008800>inst w -- 0  )
  &nbsp;</font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">or</a>  <a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">,c</a>  </font><font color=#AA0000>0 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a>  </font><font color=#FF0000>noCompile  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1010" style="text-decoration: none; color: #00AAAA">(</a> </font><font color=#008800>--  )
  &nbsp;</font><font color=#AA0000>-98  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">exception</a> 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 
</font><font color=#00AAAA><a href = "root.html#1.1290" style="text-decoration: none; color: #00AAAA">there</a>  </font><font color=#FF00FF><a href = "root.html#1.2120" style="text-decoration: none; color: #FF00FF">swap</a>  <a href = "root.html#1.2090" style="text-decoration: none; color: #FF00FF">-</a>  </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">.</a>  </font><font color=#00AAAA><a href = "root.html#1.1030" style="text-decoration: none; color: #00AAAA">.(</a> </font><font color=#008800>instructions used by compiler ) </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">cr</a> 
</pre>
</body>
</html>
