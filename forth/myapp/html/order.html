<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>order</title>
<link rel="stylesheet" href="doc.css">
</head>
<body>
<h1>order</h1>
<pre class="forth">
<font color=black>
<hr>

</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>SPI flash access 

</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>Flash addresses are doubles to support 16-bit and 18-bit cell size. 
</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>Compiled strings (for `type` etc.) are assumed to have 0 for the upper cell 
</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>of the address. Those strings must be below flash address 2^cellsize. 

</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>Single-byte reads from flash close the SPI flash after reading. 
</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>There is no assumption of continuity: Font bitmaps may be read between bytes. 
</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>So, c@f is slow. If you need speed, read flash in chunks. 

</font><font color=#00AAAA><a href = "root.html#1.1290" style="text-decoration: none; color: #00AAAA">there</a> 

</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>The search order is implemented as a stack that grows upward, with #order the 
</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>offset into the orders array as well as the number of WIDs in the list. 

</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a> </font><font color=#FF0000>'context  </font><font color=#00AAAA><a href = "root.html#1.1010" style="text-decoration: none; color: #00AAAA">(</a> </font><font color=#008800>-- a  )                  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>point to top of order 
  &nbsp;</font><font color=#AA00AA><a href = "root.html#1.0077" style="text-decoration: none; color: #AA00AA">#order</a> </font><font color=#0000FF><a href = "forth.html#2.0210" style="text-decoration: none; color: #0000FF">@</a> <a href = "forth.html#2.0170" style="text-decoration: none; color: #0000FF">cells</a> </font><font color=#00AAAA><a href = "root.html#1.1170" style="text-decoration: none; color: #00AAAA">[</a> </font><font color=#AA00AA><a href = "root.html#1.0078" style="text-decoration: none; color: #AA00AA">orders</a> <a href = "root.html#1.0060" style="text-decoration: none; color: #AA00AA">cell</a> </font><font color=#FF00FF><a href = "root.html#1.2090" style="text-decoration: none; color: #FF00FF">-</a> </font><font color=#00AAAA><a href = "root.html#1.1180" style="text-decoration: none; color: #00AAAA">]</a> <a href = "root.html#1.1260" style="text-decoration: none; color: #00AAAA">literal</a> </font><font color=#FF00FF><a href = "root.html#1.2080" style="text-decoration: none; color: #FF00FF">+</a> 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a> </font><font color=#FF0000>context  </font><font color=#00AAAA><a href = "root.html#1.1010" style="text-decoration: none; color: #00AAAA">(</a> </font><font color=#008800>-- f-addr  )
  &nbsp;</font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">'context</a> <a href = "forth.html#2.0210" style="text-decoration: none; color: #0000FF">@</a> <a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">wid</a> 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 

</font><font color=#00AAAA><a href = "root.html#1.1220" style="text-decoration: none; color: #00AAAA">:noname</a> </font><font color=#0000FF><a href = "forth.html#2.1210" style="text-decoration: none; color: #0000FF">@+</a> </font><font color=#FF00FF><a href = "root.html#1.2120" style="text-decoration: none; color: #FF00FF">swap</a> </font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a> </font><font color=#FF0000>get-order  </font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>-- widn ... wid1 n       \ 16.6.1.1647  get search order 
  &nbsp;</font><font color=#AA00AA><a href = "root.html#1.0078" style="text-decoration: none; color: #AA00AA">orders</a>  <a href = "root.html#1.0077" style="text-decoration: none; color: #AA00AA">#order</a> </font><font color=#0000FF><a href = "forth.html#2.0210" style="text-decoration: none; color: #0000FF">@</a>  </font><font color=#00AAAA><a href = "root.html#1.1260" style="text-decoration: none; color: #00AAAA">literal</a> </font><font color=#0000FF><a href = "forth.html#2.0405" style="text-decoration: none; color: #0000FF">times</a> 
  &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2130" style="text-decoration: none; color: #FF00FF">drop</a>   &nbsp;</font><font color=#AA00AA><a href = "root.html#1.0077" style="text-decoration: none; color: #AA00AA">#order</a> </font><font color=#0000FF><a href = "forth.html#2.0210" style="text-decoration: none; color: #0000FF">@</a> 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a> </font><font color=#FF0000>set-order  </font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>widn .. wid1 n --        \ 16.6.1.2197  set search order 
  &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a> <a href = "root.html#1.2160" style="text-decoration: none; color: #FF00FF">0<</a> </font><font color=#00AAAA><a href = "root.html#1.2930" style="text-decoration: none; color: #00AAAA">if</a>  </font><font color=#FF00FF><a href = "root.html#1.2130" style="text-decoration: none; color: #FF00FF">drop</a> </font><font color=#AA00AA><a href = "root.html#1.0000" style="text-decoration: none; color: #AA00AA">root</a> <a href = "root.html#1.0010" style="text-decoration: none; color: #AA00AA">forth-wordlist</a> </font><font color=#AA0000>2  </font><font color=#00AAAA><a href = "root.html#1.2950" style="text-decoration: none; color: #00AAAA">then</a> 
  &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a> </font><font color=#AA0000>8 </font><font color=#0000FF><a href = "forth.html#2.0150" style="text-decoration: none; color: #0000FF">></a> </font><font color=#AA0000>-49 </font><font color=#FF00FF><a href = "root.html#1.2070" style="text-decoration: none; color: #FF00FF">and</a> </font><font color=#0000FF><a href = "forth.html#2.0020" style="text-decoration: none; color: #0000FF">exception</a>           &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>search order overflow 
  &nbsp;</font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a> </font><font color=#AA00AA><a href = "root.html#1.0077" style="text-decoration: none; color: #AA00AA">#order</a> </font><font color=#0000FF><a href = "forth.html#2.0200" style="text-decoration: none; color: #0000FF">!</a>  </font><font color=#AA00AA><a href = "root.html#1.0078" style="text-decoration: none; color: #AA00AA">orders</a> </font><font color=#FF00FF><a href = "root.html#1.2110" style="text-decoration: none; color: #FF00FF">over</a> </font><font color=#0000FF><a href = "forth.html#2.0170" style="text-decoration: none; color: #0000FF">cells</a> </font><font color=#FF00FF><a href = "root.html#1.2080" style="text-decoration: none; color: #FF00FF">+</a>   &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>... wid n dest 
  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.2900" style="text-decoration: none; color: #00AAAA">begin</a> </font><font color=#FF00FF><a href = "root.html#1.2110" style="text-decoration: none; color: #FF00FF">over</a> </font><font color=#00AAAA><a href = "root.html#1.2960" style="text-decoration: none; color: #00AAAA">while</a> 
     &nbsp;</font><font color=#AA00AA><a href = "root.html#1.0060" style="text-decoration: none; color: #AA00AA">cell</a> </font><font color=#FF00FF><a href = "root.html#1.2090" style="text-decoration: none; color: #FF00FF">-</a>  <a href = "root.html#1.2120" style="text-decoration: none; color: #FF00FF">swap</a> </font><font color=#0000FF><a href = "forth.html#2.0370" style="text-decoration: none; color: #0000FF">1-</a> </font><font color=#FF00FF><a href = "root.html#1.2170" style="text-decoration: none; color: #FF00FF">>r</a>  </font><font color=#0000FF><a href = "forth.html#2.0390" style="text-decoration: none; color: #0000FF">tuck</a> <a href = "forth.html#2.0200" style="text-decoration: none; color: #0000FF">!</a>  </font><font color=#FF00FF><a href = "root.html#1.2180" style="text-decoration: none; color: #FF00FF">r></a> <a href = "root.html#1.2120" style="text-decoration: none; color: #FF00FF">swap</a> 
  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.2970" style="text-decoration: none; color: #00AAAA">repeat</a>  </font><font color=#0000FF><a href = "forth.html#2.0340" style="text-decoration: none; color: #0000FF">2drop</a> 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 

</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a> </font><font color=#FF0000>set-current  </font><font color=#AA00AA><a href = "root.html#1.0079" style="text-decoration: none; color: #AA00AA">current</a> </font><font color=#0000FF><a href = "forth.html#2.0200" style="text-decoration: none; color: #0000FF">!</a> </font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a>             &nbsp;<a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>16.6.1.2195 \ wid -- 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a> </font><font color=#FF0000>get-current  </font><font color=#AA00AA><a href = "root.html#1.0079" style="text-decoration: none; color: #AA00AA">current</a> </font><font color=#0000FF><a href = "forth.html#2.0210" style="text-decoration: none; color: #0000FF">@</a> </font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a>             &nbsp;<a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>16.6.1.1643 \ -- wid 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a> </font><font color=#FF0000>only        &nbsp;</font><font color=#AA0000>-1 </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">set-order</a> </font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a>          &nbsp;<a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>16.6.2.1965 \ -- 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a> </font><font color=#FF0000>also        &nbsp;</font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">get-order</a> </font><font color=#FF00FF><a href = "root.html#1.2110" style="text-decoration: none; color: #FF00FF">over</a> <a href = "root.html#1.2120" style="text-decoration: none; color: #FF00FF">swap</a> </font><font color=#0000FF><a href = "forth.html#2.0360" style="text-decoration: none; color: #0000FF">1+</a>  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>16.6.2.0715 
              &nbsp;</font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">set-order</a> </font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a> </font><font color=#FF0000>previous    &nbsp;</font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">get-order</a> </font><font color=#FF00FF><a href = "root.html#1.2140" style="text-decoration: none; color: #FF00FF">nip</a> </font><font color=#0000FF><a href = "forth.html#2.0370" style="text-decoration: none; color: #0000FF">1-</a>        &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>16.6.2.2037 
              &nbsp;</font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">set-order</a> </font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a> </font><font color=#FF0000>definitions  </font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>--                     \ 16.6.1.1180 
  &nbsp;</font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">get-order</a>  </font><font color=#FF00FF><a href = "root.html#1.2110" style="text-decoration: none; color: #FF00FF">over</a> </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">set-current</a>  <a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">set-order</a> 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a> </font><font color=#FF0000>/forth      &nbsp;</font><font color=#AA00AA><a href = "root.html#1.0000" style="text-decoration: none; color: #AA00AA">root</a> <a href = "root.html#1.0010" style="text-decoration: none; color: #AA00AA">forth-wordlist</a> </font><font color=#FF00FF><a href = "root.html#1.2100" style="text-decoration: none; color: #FF00FF">dup</a> </font><font color=#AA0000>2 </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">set-order</a>  <a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">set-current</a> </font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a> </font><font color=#FF0000>forth       &nbsp;</font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">get-order</a> </font><font color=#FF00FF><a href = "root.html#1.2140" style="text-decoration: none; color: #FF00FF">nip</a>           &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>16.6.2.1590 
              &nbsp;</font><font color=#AA00AA><a href = "root.html#1.0010" style="text-decoration: none; color: #AA00AA">forth-wordlist</a> </font><font color=#FF00FF><a href = "root.html#1.2120" style="text-decoration: none; color: #FF00FF">swap</a> </font><font color=#0000FF><a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">set-order</a> </font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 

</font><font color=#00AAAA><a href = "root.html#1.1220" style="text-decoration: none; color: #00AAAA">:noname</a> </font><font color=#0000FF><a href = "forth.html#2.1210" style="text-decoration: none; color: #0000FF">@+</a> <a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">.wid</a> </font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 
</font><font color=#00AAAA><a href = "root.html#1.1210" style="text-decoration: none; color: #00AAAA">:</a> </font><font color=#FF0000>order  </font><font color=#00AAAA><a href = "root.html#1.1020" style="text-decoration: none; color: #00AAAA">\</a> </font><font color=#008800>--                           \ 16.6.2.1985 
  &nbsp;</font><font color=#00AAAA><a href = "root.html#1.1035" style="text-decoration: none; color: #00AAAA">."</a>    &nbsp;</font><font color=#AA00AA><a href = "root.html#1.0078" style="text-decoration: none; color: #AA00AA">orders</a>  <a href = "root.html#1.0077" style="text-decoration: none; color: #AA00AA">#order</a> </font><font color=#0000FF><a href = "forth.html#2.0210" style="text-decoration: none; color: #0000FF">@</a>  </font><font color=#00AAAA><a href = "root.html#1.1260" style="text-decoration: none; color: #00AAAA">literal</a> </font><font color=#0000FF><a href = "forth.html#2.0405" style="text-decoration: none; color: #0000FF">times</a>  </font><font color=#FF00FF><a href = "root.html#1.2130" style="text-decoration: none; color: #FF00FF">drop</a> 
  &nbsp;</font><font color=#0000FF><a href = "forth.html#2.2111" style="text-decoration: none; color: #0000FF">cr</a> </font><font color=#00AAAA><a href = "root.html#1.1035" style="text-decoration: none; color: #00AAAA">."</a>  </font><font color=#AA00AA><a href = "root.html#1.0079" style="text-decoration: none; color: #AA00AA">current</a> </font><font color=#0000FF><a href = "forth.html#2.0210" style="text-decoration: none; color: #0000FF">@</a> <a href = "forth.html#(null)" style="text-decoration: none; color: #0000FF">.wid</a>  <a href = "forth.html#2.2111" style="text-decoration: none; color: #0000FF">cr</a> 
</font><font color=#00AAAA><a href = "root.html#1.1240" style="text-decoration: none; color: #00AAAA">;</a> 

</font><font color=#00AAAA><a href = "root.html#1.1290" style="text-decoration: none; color: #00AAAA">there</a> </font><font color=#FF00FF><a href = "root.html#1.2120" style="text-decoration: none; color: #FF00FF">swap</a> <a href = "root.html#1.2090" style="text-decoration: none; color: #FF00FF">-</a> </font><font color=#0000FF><a href = "forth.html#2.3300" style="text-decoration: none; color: #0000FF">.</a> </font><font color=#00AAAA><a href = "root.html#1.1030" style="text-decoration: none; color: #00AAAA">.(</a> </font><font color=#008800>instructions used by order )</font><font color=#0000FF><a href = "forth.html#2.2111" style="text-decoration: none; color: #0000FF">cr</a> 

</pre>
</body>
</html>
